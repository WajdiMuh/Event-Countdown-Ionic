"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2700],{2700:(Y,g,r)=>{r.r(g),r.d(g,{CountdownPageModule:()=>N});var u=r(9808),y=r(4182),c=r(2478),h=r(7203),f=r(5439),w=r(2916),b=r(2654);class x extends b.w{constructor(i,e){super()}schedule(i,e=0){return this}}let p=(()=>{class s{constructor(e,n=s.now){this.SchedulerAction=e,this.now=n}schedule(e,n=0,o){return new this.SchedulerAction(this,e).schedule(o,n)}}return s.now=()=>Date.now(),s})();class a extends p{constructor(i,e=p.now){super(i,()=>a.delegate&&a.delegate!==this?a.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(i,e=0,n){return a.delegate&&a.delegate!==this?a.delegate.schedule(i,e,n):super.schedule(i,e,n)}flush(i){const{actions:e}=this;if(this.active)return void e.push(i);let n;this.active=!0;do{if(n=i.execute(i.state,i.delay))break}while(i=e.shift());if(this.active=!1,n){for(;i=e.shift();)i.unsubscribe();throw n}}}const v=new a(class C extends x{constructor(i,e){super(i,e),this.scheduler=i,this.work=e,this.pending=!1}schedule(i,e=0){if(this.closed)return this;this.state=i;const n=this.id,o=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(o,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this}requestAsyncId(i,e,n=0){return setInterval(i.flush.bind(i,this),n)}recycleAsyncId(i,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(i,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(i,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,e){let o,n=!1;try{this.work(i)}catch(l){n=!0,o=!!l&&l||new Error(l)}if(n)return this.unsubscribe(),o}_unsubscribe(){const i=this.id,e=this.scheduler,n=e.actions,o=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&n.splice(o,1),null!=i&&(this.id=this.recycleAsyncId(e,i,null)),this.delay=null}});var P=r(6688);function m(s=0,i=v){return(!function Z(s){return!(0,P.k)(s)&&s-parseFloat(s)+1>=0}(s)||s<0)&&(s=0),(!i||"function"!=typeof i.schedule)&&(i=v),new w.y(e=>(e.add(i.schedule(A,s,{subscriber:e,counter:0,period:s})),e))}function A(s){const{subscriber:i,counter:e,period:n}=s;i.next(e),this.schedule({subscriber:i,counter:e+1,period:n},n)}var d=r(9892),t=r(2096),M=r(7712);function I(s,i){1&s&&(t.TgZ(0,"div",6),t._UZ(1,"ion-spinner",7),t.qZA())}function U(s,i){if(1&s&&(t.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t._uU(3),t.qZA()(),t.TgZ(4,"ion-card-content")(5,"p"),t._uU(6," Date : "),t._UZ(7,"br"),t._uU(8),t.ALo(9,"date"),t._UZ(10,"br"),t.qZA(),t.TgZ(11,"p"),t._uU(12," Time Left : "),t._UZ(13,"br"),t._uU(14),t.qZA()()()),2&s){const e=t.oxw(2);t.xp6(3),t.Oqu(e.latestevent.title),t.xp6(5),t.hij(" ",t.xi3(9,3,e.latestevent.date,"EEEE, dd/MM/yyyy, h:mm a")," "),t.xp6(6),t.hij(" ",e.daysleft," ")}}function T(s,i){1&s&&(t.TgZ(0,"ion-label"),t._uU(1," No Event Upcoming "),t.qZA())}function O(s,i){if(1&s&&(t.TgZ(0,"div",8),t.YNc(1,U,15,6,"ion-card",9),t.YNc(2,T,2,0,"ion-label",9),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.latestevent),t.xp6(1),t.Q6J("ngIf",!e.latestevent)}}const E=[{path:"",component:(()=>{class s{constructor(e,n){this.eventservice=e,this.route=n,this.finishedloading=!1,this.latestevent=void 0,this.receivedevent=void 0,this.daysleft=""}ngOnInit(){this.route.params.subscribe(e=>{null==e.id?this.eventservice.getLatestEvent().subscribe(n=>{this.subscription=m(1e3).subscribe(o=>{this.recalculate()}),this.latestevent=n,this.recalculate(),this.finishedloading=!0,this.makelocalnotification(n)},n=>{this.finishedloading=!0,this.makelocalnotification()}):(this.subscription=m(1e3).subscribe(n=>{this.recalculate()}),this.latestevent={id:parseInt(e.id),title:e.title,date:new Date(e.date)},this.receivedevent=this.latestevent,this.recalculate(),this.finishedloading=!0)})}ngOnDestroy(){null!=this.subscription&&this.subscription.unsubscribe()}refresh(e){null==this.receivedevent?this.eventservice.getLatestEvent().subscribe(n=>{this.latestevent=n,this.recalculate(),e.target.complete(),this.makelocalnotification(n)},n=>{e.target.complete(),this.makelocalnotification()}):(this.latestevent=this.receivedevent,this.recalculate(),e.target.complete())}recalculate(){var n=f(this.latestevent.date).diff(f()),o=f.duration(n);this.daysleft=`Years: ${o.years()}, Months: ${o.months()}, Days: ${o.days()}, Hours: ${o.hours()}, Minutes: ${o.minutes()}, Seconds: ${o.seconds()}`,null==this.receivedevent&&o.milliseconds()<=0&&(this.finishedloading=!1,this.eventservice.getLatestEvent().subscribe(l=>{this.latestevent=l,this.recalculate(),this.finishedloading=!0,this.makelocalnotification(l)},l=>{this.finishedloading=!0,this.makelocalnotification()}))}makelocalnotification(e){d.s.getPending().then(n=>{0==n.notifications.length?null!=e&&d.s.schedule({notifications:[{id:e.id,title:"Upcoming Event",body:e.title,schedule:{at:e.date}}]}):d.s.cancel({notifications:[{id:n.notifications[0].id}]}).then(()=>{null!=e&&d.s.schedule({notifications:[{id:e.id,title:"Upcoming Event",body:e.title,schedule:{at:e.date}}]})})})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(M.n),t.Y36(h.gz))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-countdown"]],decls:11,vars:3,consts:[["translucent",""],["slot","start"],["autoHide","false"],["slot","fixed",3,"disabled","ionRefresh"],["class","centerspinner",4,"ngIf"],["class","content",4,"ngIf"],[1,"centerspinner"],["name","crescent"],[1,"content"],[4,"ngIf"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t._UZ(3,"ion-menu-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5,"Countdown"),t.qZA()()(),t.TgZ(6,"ion-content")(7,"ion-refresher",3),t.NdJ("ionRefresh",function(l){return n.refresh(l)}),t._UZ(8,"ion-refresher-content"),t.qZA(),t.YNc(9,I,2,0,"div",4),t.YNc(10,O,3,2,"div",5),t.qZA()),2&e&&(t.xp6(7),t.s9C("disabled",0==n.finishedloading),t.xp6(2),t.Q6J("ngIf",0==n.finishedloading),t.xp6(1),t.Q6J("ngIf",n.finishedloading))},directives:[c.Gu,c.sr,c.Sm,c.fG,c.wd,c.W2,c.nJ,c.Wo,u.O5,c.PQ,c.PM,c.Zi,c.Dq,c.FN,c.Q$],pipes:[u.uU],styles:["ion-spinner[_ngcontent-%COMP%]{width:100px!important;height:100px!important}.centerspinner[_ngcontent-%COMP%]{top:50%;left:50%;position:fixed;transform:translate(-50%,-50%)}.content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;-webkit-user-select:none;user-select:none}.ios[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{margin-bottom:100px}ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:10px}ion-header[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]}),s})()}];let J=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[h.Bz.forChild(E)],h.Bz]}),s})(),N=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[u.ez,y.u5,c.Pc,J]]}),s})()}}]);